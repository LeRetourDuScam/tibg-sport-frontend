<div *ngIf="trainingPlan" class="bg-white border border-neutral-200 rounded-lg p-5 mb-5">
  <div class="mb-6">
    <h2 class="text-xl font-bold text-neutral-900 mb-2 uppercase tracking-wide">
      {{ 'PLAN.TITLE' | translate }}
    </h2>
    <div class="flex items-center gap-4 text-sm text-neutral-600">
      <span><strong>{{ 'PLAN.GOAL' | translate }}:</strong> {{ trainingPlan.goal }}</span>
      <span><strong>{{ 'PLAN.DURATION' | translate }}:</strong> {{ trainingPlan.durationWeeks }} {{ 'PLAN.WEEKS' | translate }}</span>
    </div>
  </div>

  <!-- Weekly Schedule Table -->
  <div class="overflow-x-auto mb-6">
    <table class="w-full border-collapse">
      <thead>
        <tr class="bg-neutral-100">
          <th class="p-3 text-left text-xs font-bold text-neutral-700 border border-neutral-300 uppercase w-24">
            {{ 'PLAN.WEEK' | translate }}
          </th>
          <th *ngFor="let day of daysOfWeek"
              class="p-3 text-center text-xs font-bold text-neutral-700 border border-neutral-300 uppercase min-w-[140px]">
            {{ day }}
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let week of trainingPlan.weeks; let isEven = even"
            [class.bg-blue-50]="isEven"
            [class.bg-white]="!isEven">
          <td class="p-3 text-center font-bold text-neutral-800 border border-neutral-300 bg-blue-100">
            {{ 'PLAN.WEEK' | translate }} {{ week.weekNumber }}
          </td>
          <td *ngFor="let day of daysOfWeek"
              class="p-3 border border-neutral-300 align-top">
            <ng-container *ngIf="getSessionForDay(week, day) as session; else restDay">
              <div class="space-y-1">
                <div class="font-bold text-sm text-neutral-900 uppercase">
                  {{ session.type }}
                </div>
                <div class="text-xs text-neutral-600">
                  {{ session.duration }} mins
                </div>
                <div class="text-xs font-medium"
                     [class.text-green-600]="session.intensity === 'Low'"
                     [class.text-orange-600]="session.intensity === 'Medium'"
                     [class.text-red-600]="session.intensity === 'High'">
                  {{ session.intensity }}
                </div>
                <ul class="text-xs text-neutral-600 space-y-0.5 mt-2">
                  <li *ngFor="let exercise of session.exercises" class="leading-snug">
                    • {{ exercise }}
                  </li>
                </ul>
                <div *ngIf="session.notes" class="text-xs italic text-neutral-500 mt-1">
                  {{ session.notes }}
                </div>
              </div>
            </ng-container>
            <ng-template #restDay>
              <div class="text-center text-sm font-medium text-neutral-400 uppercase">
                {{ 'PLAN.REST' | translate }}
              </div>
            </ng-template>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Week Focus Legend -->
  <div class="bg-blue-50 border border-blue-200 rounded-md p-4 mb-4">
    <h3 class="text-sm font-medium text-blue-900 mb-3">{{ 'PLAN.WEEKLY_FOCUS' | translate }}</h3>
    <div class="grid md:grid-cols-2 gap-2">
      <div *ngFor="let week of trainingPlan.weeks" class="text-sm">
        <span class="font-semibold text-blue-800">{{ 'PLAN.WEEK' | translate }} {{ week.weekNumber }}:</span>
        <span class="text-blue-700"> {{ week.focus }}</span>
      </div>
    </div>
  </div>

  <!-- Equipment & Tips -->
  <div class="grid md:grid-cols-2 gap-4">
    <div class="bg-white border border-neutral-200 rounded-md p-4">
      <h4 class="text-sm font-medium text-neutral-800 mb-3">{{ 'PLAN.EQUIPMENT' | translate }}</h4>
      <ul class="space-y-2">
        <li *ngFor="let item of trainingPlan.equipment" class="flex items-start gap-2 text-sm text-neutral-600">
          <span class="text-neutral-400 mt-0.5">•</span>
          <span>{{ item }}</span>
        </li>
      </ul>
    </div>

    <div class="bg-white border border-neutral-200 rounded-md p-4">
      <h4 class="text-sm font-medium text-neutral-800 mb-3">{{ 'PLAN.PROGRESSION_TIPS' | translate }}</h4>
      <ul class="space-y-2">
        <li *ngFor="let tip of trainingPlan.progressionTips" class="flex items-start gap-2 text-sm text-neutral-600">
          <span class="text-green-500 mt-0.5">✓</span>
          <span>{{ tip }}</span>
        </li>
      </ul>
    </div>
  </div>
</div>
