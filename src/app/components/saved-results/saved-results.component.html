<div class="min-h-screen bg-[#fafafa]">
  <header class="bg-white border-b border-neutral-200">
    <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
      <a [routerLink]="['/']" class="text-base font-semibold text-neutral-800 hover:text-neutral-600">FytAI</a>
      <span class="text-sm text-neutral-500">{{ 'SAVED_RESULTS.TITLE' | translate }}</span>
    </div>
  </header>

  <main class="max-w-5xl mx-auto px-4 py-6">
    <div class="mb-6 flex items-center justify-between">
      <div>
        <h1 class="text-2xl font-semibold text-neutral-900 mb-1">{{ 'SAVED_RESULTS.TITLE' | translate }}</h1>
        <p class="text-sm text-neutral-600">{{ 'SAVED_RESULTS.SUBTITLE' | translate: {count: savedResults.length} }}</p>
      </div>

      <button
        *ngIf="savedResults.length > 0"
        (click)="clearAll()"
        class="px-4 py-2 text-sm font-medium text-red-600 hover:text-red-700 hover:underline cursor-pointer">
        {{ 'SAVED_RESULTS.CLEAR_ALL' | translate }}
      </button>
    </div>

    <div *ngIf="savedResults.length === 0" class="bg-white border border-neutral-200 rounded-lg p-12 text-center">
      <lucide-icon [img]="ArchiveIcon" [size]="64" class="text-neutral-300 mx-auto mb-4"></lucide-icon>
      <h2 class="text-lg font-medium text-neutral-900 mb-2">{{ 'SAVED_RESULTS.NO_DATA' | translate }}</h2>
      <p class="text-sm text-neutral-600 mb-6">{{ 'SAVED_RESULTS.NO_DATA_DESC' | translate }}</p>
      <a [routerLink]="['/form']" class="inline-flex items-center justify-center gap-2 px-6 py-2.5 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors">
        {{ 'SAVED_RESULTS.START_TEST' | translate }}
      </a>
    </div>

    <div *ngIf="savedResults.length > 0" class="space-y-4">
      <div
        *ngFor="let result of savedResults"
        (click)="viewResult(result)"
        class="bg-white border border-neutral-200 rounded-lg p-5 hover:shadow-md transition-shadow cursor-pointer group">

        <div class="flex items-start justify-between mb-3">
          <div class="flex-1">
            <div class="flex items-center gap-3 mb-2">
              <h3 class="text-lg font-semibold text-neutral-900 group-hover:text-blue-600 transition-colors">
                {{ result.recommendation.sport }}
              </h3>
              <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                {{ result.recommendation.score }}% {{ 'SAVED_RESULTS.COMPATIBLE' | translate }}
              </span>
            </div>
            <p class="text-sm text-neutral-600 mb-1">{{ result.recommendation.reason }}</p>
            <p class="text-xs text-neutral-500">{{ getTimeSince(result.timestamp) }}</p>
          </div>

          <div class="ml-4 flex items-center gap-2">
            <button
              (click)="exportResult(result, $event)"
              class="p-2 text-neutral-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors"
              [title]="'SAVED_RESULTS.EXPORT_PDF' | translate">
              <lucide-icon [img]="DownloadIcon" [size]="20"></lucide-icon>
            </button>
            <button
              (click)="deleteResult(result.id, $event)"
              class="p-2 text-neutral-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors"
              [title]="'SAVED_RESULTS.DELETE' | translate">
              <lucide-icon [img]="Trash2Icon" [size]="20"></lucide-icon>
            </button>
          </div>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 text-xs text-neutral-500">
          <div>
            <span class="font-medium">{{ 'SAVED_RESULTS.AGE' | translate }}:</span> {{ result.userProfile.age }} {{ 'SAVED_RESULTS.YEARS' | translate }}
          </div>
          <div>
            <span class="font-medium">{{ 'SAVED_RESULTS.GOAL' | translate }}:</span> {{ result.userProfile.mainGoal }}
          </div>
          <div>
            <span class="font-medium">{{ 'SAVED_RESULTS.LEVEL' | translate }}:</span> {{ result.userProfile.fitnessLevel }}
          </div>
          <div>
            <span class="font-medium">{{ 'SAVED_RESULTS.FREQUENCY' | translate }}:</span> {{ result.userProfile.exerciseFrequency }}
          </div>
        </div>

        <div class="mt-4 flex items-center gap-2 text-sm text-blue-600 group-hover:text-blue-700">
          {{ 'SAVED_RESULTS.VIEW_DETAILS' | translate }}
          <lucide-icon [img]="FileTextIcon" [size]="16"></lucide-icon>
        </div>
      </div>
    </div>

    <div class="mt-6 text-center">
      <a [routerLink]="['/']" class="inline-flex items-center gap-2 text-sm text-neutral-600 hover:text-neutral-900">
        <lucide-icon [img]="ArrowLeftIcon" [size]="16"></lucide-icon>
        {{ 'COMMON.BACK_HOME' | translate }}
      </a>
    </div>
  </main>
</div>
